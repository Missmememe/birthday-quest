<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéâ Birthday Quest</title>
  <style>
    :root{
      --bg:#0f0f12; --card:#17171c; --muted:#a3a3b2; --accent:#e95d8c; --ok:#43d17d;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; background:var(--bg); color:#f7f7fb; line-height:1.45}
    .center{display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; text-align:center; padding:20px}
    .hidden{display:none}
    .app{max-width:900px; margin:0 auto; padding:24px 16px 64px; text-align:center}
    .card{background:var(--card); border-radius:20px; padding:24px; box-shadow:0 10px 30px #00000070; animation:fadeIn .4s ease}
    input,button{padding:12px 14px; border-radius:12px; border:none; font-size:16px}
    input{width:min(460px,92vw); text-align:center; background:#0d0d10; color:#fff; border:1px solid #2a2a33}
    button{background:var(--accent); color:#fff; cursor:pointer; font-weight:600; transition:transform .08s ease, background .25s ease}
    button:hover{background:#ff77a8}
    button:active{transform:translateY(1px)}
    .ghost{background:#2a2a33}
    .row{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px}
    .hint-badge{display:inline-block; background:#2a2a33; color:#fff; padding:8px 14px; border-radius:999px; margin-top:12px; font-size:14px; animation:fadeIn .3s ease}
    .msg{margin-top:10px; font-size:14px}
    .ok{color:var(--ok)} .err{color:#ff6b6b}
    .progress{height:8px; background:#20202a; border-radius:999px; overflow:hidden; margin:6px 0 18px}
    .progress .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), #8a6fe8)}
    .actions a{display:block; margin:10px 0; color:var(--accent); word-break:break-word}
    /* Overlay viewer */
    .overlay{position:fixed; inset:0; background:#000c; display:none; align-items:center; justify-content:center; padding:16px; z-index:9999}
    .overlay .box{max-width:min(920px,96vw); max-height:90vh; width:100%; background:#0b0b0e; border:1px solid #2a2a33; border-radius:16px; padding:12px; box-shadow:0 20px 60px #000}
    .overlay .head{display:flex; justify-content:space-between; align-items:center; color:#fff; margin-bottom:8px}
    .overlay button.close{background:#2a2a33}
    .overlay .content{display:flex; align-items:center; justify-content:center; background:#111; border-radius:12px; overflow:hidden; height:min(70vh, 70svh);}
    .overlay .content img, .overlay .content video, .overlay .content iframe, .overlay .content embed{width:100%; height:100%}
    @keyframes fadeIn{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}
  </style>
</head>
<body>
  <!-- GATE -->
  <div id="lock-screen" class="center">
    <h1 style="margin:0 0 8px">üîí –î–æ—Å—Ç—É–ø –æ–±–º–µ–∂–µ–Ω–∏–π</h1>
    <p style="margin:0; color:var(--muted)">–Ø–∫ –°–æ–Ω–µ—á–∫–æ —Ç–µ–±–µ –Ω–∞–∑–∏–≤–∞—î?</p>
    <div class="row" style="margin-top:10px">
      <input type="text" id="password" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å..." />
      <button id="btn-open">–í—ñ–¥–∫—Ä–∏—Ç–∏</button>
    </div>
    <div id="lock-msg" class="msg err"></div>
  </div>

  <!-- GAME -->
  <div id="game" class="hidden">
    <div class="app">
      <div class="progress"><div class="bar" id="bar"></div></div>
      <div class="card" id="card-container"></div>
    </div>
  </div>

  <!-- Overlay viewer -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-label="–ü–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–∏–∑—É">
    <div class="box">
      <div class="head">
        <div id="ov-title">–ü–µ—Ä–µ–≥–ª—è–¥</div>
        <button class="close" id="ov-close">–ó–∞–∫—Ä–∏—Ç–∏ ‚úï</button>
      </div>
      <div class="content" id="ov-content"></div>
      <div class="row" style="margin-top:10px">
        <a id="ov-open" href="#" target="_blank" rel="noopener"><button class="ghost">–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ</button></a>
      </div>
    </div>
  </div>

<script>
// ===== Data (use relative paths 'prizes/...') =====
const STEPS = [
  { q: "–Ø–∫ —Ç–∏ –º–µ–Ω–µ –Ω–∞–∑–∏–≤–∞—î—à –∑ –ø—ñ—Å–Ω—ñ?",
    answers: ["–¥–µ–≤–æ—á–∫–∞ –ø–∏–∑–¥–µ—Ü","–¥—î–≤–æ—á–∫–∞ –ø—ñ–∑–¥–µ—Ü"],
    hint: "üé§ –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∫–∞–∫ —É Oxxxymiron",
    prize: { title:"–í—ñ—Ç–∞–ª—å–Ω–∞ –ª–∏—Å—Ç—ñ–≤–∫–∞", text:"–ü–æ—á–Ω–µ–º–æ –∑ –º'—è–∫–æ–≥–æ ‚Äî –∞–ª–µ –≥–∞—Ä—è—á–æ–≥–æ",
      links:[{label:"–í—ñ–¥–∫—Ä–∏—Ç–∏ –ª–∏—Å—Ç—ñ–≤–∫—É", href:"prizes/Birthday-card.jpg"}] } },
  { q: "–Ø–∫–æ–≥–æ —á–∏—Å–ª–∞ —ñ –º—ñ—Å—è—Ü—è –º–∏ –ø–æ–∑–Ω–∞–π–æ–º–∏–ª–∏—Å—å? (–ø—Ä–æ–ø–∏—Å–æ–º)",
    answers:["–¥—Ä—É–≥–æ–≥–æ –±–µ—Ä–µ–∑–Ω—è"],
    hint:"üå∏ –í–µ—Å–Ω–∞, –ø–æ—á–∞—Ç–æ–∫ —ñ—Å—Ç–æ—Ä—ñ—ó",
    prize:{ title:"–õ–∏—Å—Ç –≤—ñ–¥ –º–µ–Ω–µ (PDF)", text:"–Ø –Ω–∞–ø–∏—Å–∞–ª–∞ —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±–µ",
      links:[{label:"–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ª–∏—Å—Ç", href:"prizes/Letter.pdf", download:true}] } },
  { q: "–Ø–∫ —Ç–∏ —Å–µ–±–µ –ª—é–±–∏—à –Ω–∞–∑–∏–≤–∞—Ç–∏? (–ø—ñ–¥–∫–∞–∑–∫–∞: –° –ü –û)",
    answers:["—Å—Ç–∞—Ä–∞ –ø–æ–π–æ–±–∞–Ω–∞ –æ–Ω–¥–∞—Ç—Ä–∞"],
    hint:"üòà –¢—Ä–∏ —Å–ª–æ–≤–∞, —ñ–Ω—ñ—Ü—ñ–∞–ª–∏ –°-–ü-–û",
    prize:{ title:"–û–∫—Å—ñ–¥—Ä–æ—á–µ—Ä ‚Äî –≤—ñ–¥–µ–æ", text:"–¢—Ä–æ—Ö–∏ –∞–±—Å—É—Ä–¥—É, —Ç—Ä–æ—Ö–∏ —Å–º—ñ—Ö—É",
      links:[{label:"–í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ–¥–µ–æ", href:"prizes/oxydrocher.mp4"}] } },
  { q: "–í—ñ–∑—å–º–∏ –∫–æ–∂–Ω—É –±—É–∫–≤—É –ø–æ —á–µ—Ä–∑—ñ (1-—à–∞, 2-–≥–∞‚Ä¶), 'my nobby mate honor nowcz derbby  maverik bestival'",
    answers:["–º–æ—Ç–æ—Ü–∏–∫–ª"],
    hint:"üèç –î–≤—ñ –∫–æ–ª—ñ—Å–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç—ñ‚Ä¶",
    prize:{ title:"–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞ –±–∞–π–∫", text:"–ü–æ—ó—Ö–∞–ª–∏!",
      links:[{label:"–í—ñ–¥–∫—Ä–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç", href:"prizes/Certificate-Moto.jpg"}] } },
  { q: "–©–æ —è –∫–æ–ª–∏—Å—å –æ–±—ñ—Ü—è–ª–∞ –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ —Ç–æ–±—ñ –Ω–∞ –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è? (–ø—ñ–¥–∫–∞–∑–∫–∞: —Å–∫–æ—Ä—ñ—à –∑–∞ –≤—Å–µ —á–µ—Ä–≤–æ–Ω–µ–Ω—å–∫—ñ)",
    answers:["—Ç—Ä—É—Å–∏–∫–∏","–ø–∞–Ω—Ç–∞–ª–∫–∏","–ø–ª–∞–≤–∫–∏"],
    hint:"üíã –ú–∞–ª–µ–Ω—å–∫–∏–π —Ç–µ–∫—Å—Ç–∏–ª—å —ñ–∑ –≤–µ–ª–∏–∫–∏–º –Ω–∞—Å—Ç—Ä–æ—î–º",
    prize:{ title:"–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞ –µ—Ä–æ—Ç–æ–≤–∞—Ä–∏", text:"–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π –º—É–¥—Ä–æ",
      links:[{label:"–í—ñ–¥–∫—Ä–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç", href:"prizes/Certificate-tr.jpg"}] } },
  { q: "–ó —è–∫–æ—é –∫–≤—ñ—Ç–∫–æ—é —Ç–µ–±–µ –∞—Å–æ—Ü—ñ—é–≤–∞–ª–∞ –ü–∞–Ω—ñ?",
    answers:["–µ–¥–µ–ª—å–≤–µ–π—Å","–µ–¥–µ–ª–≤–µ–π—Å"],
    hint:"üåº –†—ñ–¥–∫—ñ—Å–Ω–∞ –≥—ñ—Ä—Å—å–∫–∞ –∫—Ä–∞—Å—É–Ω—è",
    prize:{ title:"PlayMe (PDF)", text:"–õ–µ–≥–∫–∞ –ø—ñ–∫–∞–Ω—Ç–Ω—ñ—Å—Ç—å",
      links:[{label:"–í—ñ–¥–∫—Ä–∏—Ç–∏ PDF", href:"prizes/PlayMe.pdf"}] } },
  { q: "–•—Ç–æ –Ω–∞—Ä–æ–¥–∂—É—î—Ç—å—Å—è —É —Å–µ—Ä–ø–Ω—ñ? –ù–µ –∑–∞–±—É–≤–∞–π—Ç–µ –ø—Ä–æ —Ü–µ üòú",
    answers:["–ª–µ–≤","–¥—ñ–≤–∞","—Ç–∏","—è"],
    hint:"ü¶Å –ú—ñ–∂ –õ–µ–≤–æ–º —ñ –î—ñ–≤–æ—é‚Ä¶ –∞–±–æ –ø—Ä–æ—Å—Ç–æ –¢–ò",
    prize:{ title:"–§—ñ–Ω–∞–ª—å–Ω–µ –≤—ñ–¥–µ–æ-–ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è", text:"–ù–∞—Ç–∏—Å–Ω–∏, —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ—ñ–Ω–∞–ª",
      links:[{label:"–î–∏–≤–∏—Ç–∏—Å—å –≤—ñ–¥–µ–æ", href:"prizes/Z-DR.mp4"}] } },
];

// ===== Utils =====
const normalize = s => (s||"").toLowerCase().trim().replace(/\s+/g,' ');
function extFrom(url){ const m = url.toLowerCase().match(/\\.([a-z0-9]+)(?:\\?|#|$)/); return m?m[1]:''; }

// ===== Gate =====
document.getElementById('btn-open').addEventListener('click', () => {
  const val = normalize(document.getElementById('password').value);
  if (['–Ω–µ –∑–∞–Ω—É–¥–∞','–Ω–µ–∑–∞–Ω—É–¥–∞','–Ω–µ-–∑–∞–Ω—É–¥–∞'].includes(val)) {
    document.getElementById('lock-screen').classList.add('hidden');
    document.getElementById('game').classList.remove('hidden');
    showStep();
  } else {
    document.getElementById('lock-msg').textContent = '–•–º‚Ä¶ –ê —Ç–æ—á–Ω–æ –°–æ–Ω–µ—á–∫–æ —Ç–∞–∫ –∫–∞–∑–∞–ª–æ? üòâ';
  }
});
document.getElementById('password').addEventListener('keydown', e => { if(e.key==='Enter') document.getElementById('btn-open').click(); });

// ===== Game rendering =====
let currentStep = 0;
const bar = () => document.getElementById('bar');
function updateProgress(){ bar().style.width = Math.round(currentStep/STEPS.length*100) + '%'; }

function renderHintArea(stepIdx){
  const step = STEPS[stepIdx];
  return `
    <div id="hint-wrap" class="hidden"><div class="hint-badge">${step.hint}</div></div>
    <div class="row">
      <button class="ghost" id="btn-hint" type="button">–ü–æ–∫–∞–∑–∞—Ç–∏ –ø—ñ–¥–∫–∞–∑–∫—É</button>
      <button class="ghost" id="btn-answer" type="button">–ü–æ–∫–∞–∑–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å</button>
    </div>
  `;
}

function showStep(){
  const step = STEPS[currentStep];
  const container = document.getElementById('card-container');
  container.innerHTML = `
    <h2 style="margin:0 0 6px">${step.q}</h2>
    <input type="text" id="answer" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å...">
    <div class="row"><button id="btn-check" type="button">–í—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏</button></div>
    ${renderHintArea(currentStep)}
    <div id="msg" class="msg"></div>
  `;
  updateProgress();
  document.getElementById('btn-check').addEventListener('click', checkAnswer);
  document.getElementById('answer').addEventListener('keydown', e => { if(e.key==='Enter') checkAnswer(); });
  document.getElementById('btn-hint').addEventListener('click', () => document.getElementById('hint-wrap').classList.remove('hidden'));
  document.getElementById('btn-answer').addEventListener('click', () => { const i=document.getElementById('answer'); i.value = STEPS[currentStep].answers[0]; checkAnswer(); });
}

function checkAnswer(){
  const step = STEPS[currentStep];
  const val = normalize(document.getElementById('answer').value);
  const ok = step.answers.map(normalize).includes(val);
  const msg = document.getElementById('msg');

  if(ok){
    msg.textContent = '–í—ñ—Ä–Ω–æ!'; msg.className = 'msg ok';
    const linksHTML = step.prize.links.map((l,idx) => `
      <div class="row">
        <button data-href="${l.href}" data-title="${step.prize.title}" class="ghost btn-open-here">–í—ñ–¥–∫—Ä–∏—Ç–∏ —Ç—É—Ç</button>
        <a href="${l.href}" target="_blank" rel="noopener"><button>–£ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ</button></a>
        ${extFrom(l.href)==='pdf' ? `<a href="${l.href}" download><button class="ghost">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PDF</button></a>` : ''}
      </div>`).join('');
    document.getElementById('card-container').innerHTML = `
      <h2 style="margin:0 0 6px">${step.prize.title}</h2>
      <p style="color:var(--muted)">${step.prize.text}</p>
      ${linksHTML}
      <div class="row"><button id="btn-next">–î–∞–ª—ñ ‚Üí</button></div>
    `;
    document.querySelectorAll('.btn-open-here').forEach(btn=>{
      btn.addEventListener('click',()=>openInOverlay(btn.getAttribute('data-href'), btn.getAttribute('data-title')));
    });
    document.getElementById('btn-next').addEventListener('click', nextStep);
  } else {
    msg.textContent = '–ù–µ –∑–æ–≤—Å—ñ–º‚Ä¶ —Å–ø—Ä–æ–±—É–π —â–µ üòâ'; msg.className = 'msg err';
  }
}

function nextStep(){
  currentStep++;
  if(currentStep < STEPS.length){ showStep(); }
  else {
    bar().style.width = '100%';
    document.getElementById('card-container').innerHTML = '<h2>–ö–≤–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–æ! üéâ</h2><p>–¢–∏ –ø—Ä–æ–π—à–æ–≤ —É—Å—ñ –∑–∞–≤–¥–∞–Ω–Ω—è!</p>';
  }
}

// ===== Overlay viewer =====
const overlay = document.getElementById('overlay');
const ovTitle = document.getElementById('ov-title');
const ovContent = document.getElementById('ov-content');
const ovOpen = document.getElementById('ov-open');
document.getElementById('ov-close').addEventListener('click', closeOverlay);
overlay.addEventListener('click', (e)=>{ if(e.target===overlay) closeOverlay(); });
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeOverlay(); });

function openInOverlay(url, title='–ü–µ—Ä–µ–≥–ª—è–¥'){
  ovTitle.textContent = title;
  ovOpen.href = url;
  ovContent.innerHTML = renderPreview(url);
  overlay.style.display = 'flex';
}
function closeOverlay(){ overlay.style.display = 'none'; ovContent.innerHTML = ''; }

function renderPreview(url){
  const e = extFrom(url);
  if(['jpg','jpeg','png','gif','webp','avif'].includes(e)){
    return `<img src="${url}" alt="preview">`;
  }
  if(['mp4','webm','ogg'].includes(e)){
    return `<video src="${url}" controls playsinline></video>`;
  }
  if(e==='pdf'){
    // Many mobile browsers can show PDFs inline; if not, user can use "–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ"
    return `<embed src="${url}" type="application/pdf">`;
  }
  return `<div style="padding:12px; color:#fff">–ù–µ –º–æ–∂—É –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ç—É—Ç. –°–∫–æ—Ä–∏—Å—Ç–∞–π—Å—è –∫–Ω–æ–ø–∫–æ—é ¬´–£ –Ω–æ–≤—ñ–π –≤–∫–ª–∞–¥—Ü—ñ¬ª –≤–∏—â–µ.</div>`;
}
</script>
</body>
</html>

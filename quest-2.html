<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéÅ –ö–≤–µ—Å—Ç –¥–æ –î–Ω—è –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</title>
  <meta name="description" content="–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –∫–≤–µ—Å—Ç –∑ –∑–∞–≥–∞–¥–∫–∞–º–∏ —Ç–∞ –ø—Ä–∏–∑–∞–º–∏" />
  <style>
    :root {
      --bg: #0f1115;
      --card: #151923;
      --muted: #a6adbb;
      --text: #e5e7eb;
      --accent: #6ee7b7;
      --accent-2: #60a5fa;
      --danger: #f87171;
      --ok: #34d399;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% 0%, #111827 0%, var(--bg) 60%);
      color: var(--text);
    }
    .wrap { max-width: 980px; margin: 0 auto; padding: 32px 20px 60px; }
    header { display:flex; align-items:center; gap:14px; margin-bottom: 18px; }
    .badge { font-size: 12px; color: var(--bg); background: linear-gradient(45deg, var(--accent), var(--accent-2)); padding: 6px 10px; border-radius: 999px; font-weight: 700; letter-spacing: .5px; }
    h1 { margin: 6px 0 2px; font-size: clamp(26px, 4.2vw, 40px); line-height: 1.1; }
    p.lead { margin: 0; color: var(--muted); }

    .card { background: linear-gradient(180deg, #161a24, var(--card)); border: 1px solid #1f2633; border-radius: 18px; padding: 18px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
    .grid { display:grid; grid-template-columns: 1fr; gap: 18px; }

    .progress { position: relative; height: 10px; background: #0b0e14; border-radius: 999px; overflow:hidden; border:1px solid #1f2633; }
    .progress > span { display:block; height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .35s ease; }
    .step { display:none; }
    .step.active { display:block; }

    .q { font-size: clamp(18px, 2.5vw, 22px); margin: 4px 0 12px; }
    .hint { color: var(--muted); font-size: 14px; margin: -6px 0 12px; }

    .field { display:flex; gap: 10px; align-items: center; }
    input[type="text"] { flex: 1; background: #0b0e14; color: var(--text); border:1px solid #232a38; border-radius: 12px; padding: 12px 14px; font-size: 16px; outline: none; box-shadow: inset 0 0 0 1px transparent; }
    input[type="text"]:focus { border-color: #2b3447; box-shadow: inset 0 0 0 1px #2b3447; }
    button { background: #0b0e14; color: var(--text); border:1px solid #232a38; border-radius: 12px; padding: 10px 14px; font-size: 15px; cursor: pointer; }
    button.primary { background: linear-gradient(90deg, var(--accent), var(--accent-2)); border: none; color: #0b0e14; font-weight: 700; }

    .msg { margin-top: 10px; font-size: 14px; }
    .ok { color: var(--ok); }
    .bad { color: var(--danger); }

    .prize { margin-top: 16px; padding: 14px; border-radius: 14px; background: #0b0e14; border:1px dashed #263044; }
    .prize h4 { margin: 0 0 8px; }
    .prize p { margin: 0; color: var(--muted); }

    .footer { text-align:center; color: var(--muted); font-size: 13px; margin-top: 22px; }
    .controls { display:flex; gap: 10px; margin-top: 14px; }

    .locked { opacity: .65; filter: grayscale(70%); }

    .final { text-align:center; padding: 26px 12px; }

    .small { font-size: 12px; color: var(--muted); }

    @media (min-width: 960px) { .grid { grid-template-columns: 1fr 1fr; } .prize { grid-column: span 2; } }

    /* Embeds */
    .embed { width: 100%; border: none; border-radius: 12px; background: #0b0e14; }
    .embed.pdf { height: 520px; }
    .embed.video { max-width: 100%; }
    .embed.img { max-width: 100%; border-radius: 12px; display:block; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <span class="badge">Happy B-Day Quest</span>
      <div>
        <h1>üéâ –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –∫–≤–µ—Å—Ç –≤—ñ–¥ <em>–Ω–µ—ó</em> –¥–ª—è <em>–Ω—å–æ–≥–æ</em></h1>
        <p class="lead">–†–æ–∑–≥–∞–¥—É–π –ø—ñ–¥–∫–∞–∑–∫–∏, –≤—ñ–¥–∫—Ä–∏–≤–∞–π –ø—Ä–∏–∑–∏ —ñ –π–¥–∏ –¥–æ —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ —Å—é—Ä–ø—Ä–∏–∑—É üíå</p>
      </div>
    </header>

    <div class="card" id="app">
      <div class="progress" aria-label="–ü—Ä–æ–≥—Ä–µ—Å"><span id="bar"></span></div>

      <div id="steps"></div>

      <div class="footer">
        <div class="controls">
          <button id="reset">–°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å</button>
          <button id="share">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º</button>
        </div>
        <p class="small">–ü—ñ–¥–∫–∞–∑–∫–∞: –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ —Ä–µ–≥—ñ—Å—Ç—Ä—É —ñ –ø—Ä–æ–±—ñ–ª—ñ–≤ üòâ</p>
      </div>
    </div>
  </div>

  <script>
    // –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–∏—Ä–∏–ª–∏—Ü—ñ/–ª–∞—Ç–∏–Ω–∏—Ü—ñ + –ø—Ä–æ–±—ñ–ª–∏/–∑–Ω–∞–∫–∏
    const normalize = (s) => (s||"")
      .toLowerCase()
      .replace(/[`'‚Äô º]/g, "'")
      .normalize('NFKD')
      .replace(/[\u0300-\u036f]/g, '')
      .replace(/\s+/g, ' ')
      .trim();

    const soft = (s) => normalize(s).replace(/[^\p{L}\p{N}]+/gu, '');

    // –ö–†–û–ö–ò –ö–í–ï–°–¢–£ (–∑ –≤–±—É–¥–æ–≤–∞–Ω–∏–º–∏ –ø—Ä–∏–∑–∞–º–∏ –∑ –ø–∞–ø–∫–∏ assets/)
    const STEPS = [
      {
        q: "1) –Ø–∫ —Ç–∏ –º–µ–Ω–µ –Ω–∞–∑–∏–≤–∞—î—à –∑ –ø—ñ—Å–Ω—ñ?",
        hint: "–ó–≥–∞–¥—É–π –ø—Ä–∏—Å–ø—ñ–≤ üòâ",
        answer: { accept: ["–¥–µ–≤–æ—á–∫–∞ –ø–∏–∑–¥–µ—Ü", "–¥–µ–≤–æ—á–∫–∞-–ø–∏–∑–¥–µ—Ü", "–¥—î–≤–æ—á–∫–∞ –ø—ñ–∑–¥–µ—Ü"] },
        prize: `
          <h4>üéÅ –ü—Ä–∏–∑ #1 ‚Äî Happy.jpg</h4>
          <img class="embed img" src="assets/Happy.jpg" alt="Happy">
        `,
      },
      {
        q: "2) –Ø–∫–æ–≥–æ —á–∏—Å–ª–∞ —ñ –º—ñ—Å—è—Ü—è –º–∏ –ø–æ–∑–Ω–∞–π–æ–º–∏–ª–∏—Å—è? (–ø—Ä–æ–ø–∏—Å–æ–º)",
        hint: "–¥—Ä—É–≥–æ–≥–æ ‚Ä¶ (–º—ñ—Å—è—Ü—å —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é)",
        answer: { accept: ["–¥—Ä—É–≥–æ–≥–æ –±–µ—Ä–µ–∑–Ω—è", "2 –±–µ—Ä–µ–∑–Ω—è", "–¥—Ä—É–≥–µ –±–µ—Ä–µ–∑–Ω—è"] },
        prize: `
          <h4>üéÅ –ü—Ä–∏–∑ #2 ‚Äî Write.pdf</h4>
          <iframe class="embed pdf" src="assets/Write.pdf"></iframe>
        `,
      },
      {
        q: "3) –Ø–∫ —Ç–∏ —Å–µ–±–µ –ª—é–±–∏—à –Ω–∞–∑–∏–≤–∞—Ç–∏? –ü—ñ–¥–∫–∞–∑–∫–∞ (–° –ü –û)",
        answer: { accept: ["—Å—Ç–∞—Ä–∞ –ø–æ–π–æ–±–∞–Ω–∞ –æ–Ω–¥–∞—Ç—Ä–∞", "—Å–ø–æ", "—Å—Ç–∞—Ä–∞ –ø–∞* –æ–Ω–¥–∞—Ç—Ä–∞"] },
        prize: `
          <h4>üéÅ –ü—Ä–∏–∑ #3 ‚Äî Oxydrocher.mp4</h4>
          <video class="embed video" src="assets/Oxydrocher.mp4" controls playsinline></video>
        `,
      },
      {
        q: "4) –í—ñ–∑—å–º–∏ –∫–æ–∂–Ω—É –±—É–∫–≤—É –ø–æ —á–µ—Ä–∑—ñ (1-—à–∞, 2-–≥–∞ ‚Ä¶): my nobby mate honor nowcz derbby maverik bestival",
        hint: "–í—ñ–∑—å–º–∏ 1-—à—É, –ø–æ—Ç—ñ–º 2-–≥—É, —ñ —Ç–∞–∫ –¥–∞–ª—ñ –∑ –∫–æ–∂–Ω–æ–≥–æ —Å–ª–æ–≤–∞‚Ä¶",
        answer: { accept: ["–º–æ—Ç–æ—Ü–∏–∫–ª", "–º–æ—Ç–æ—Ü–∏–∫–ª—ñ", "–º–æ—Ç–æ"] },
        prize: `
          <h4>üéÅ –ü—Ä–∏–∑ #4 ‚Äî CertificateMoto.jpg</h4>
          <img class="embed img" src="assets/CertificateMoto.jpg" alt="CertificateMoto">
        `,
      },
      {
        q: "5) –©–æ —è –∫–æ–ª–∏—Å—å –æ–±—ñ—Ü—è–ª–∞ –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ —Ç–æ–±—ñ –Ω–∞ –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è? (—Å–∫–æ—Ä—ñ—à –∑–∞ –≤—Å–µ —á–µ—Ä–≤–æ–Ω–µ–Ω—å–∫—ñ)",
        answer: { accept: ["—Ç—Ä—É—Å–∏–∫–∏", "—Ç—Ä—É—Å–∏", "—á–µ—Ä–≤–æ–Ω—ñ —Ç—Ä—É—Å–∏–∫–∏", "—á–µ—Ä–≤–æ–Ω—ñ —Ç—Ä—É—Å–∏"] },
        prize: `
          <h4>üéÅ –ü—Ä–∏–∑ #5 ‚Äî Certificatetr.jpg</h4>
          <img class="embed img" src="assets/Certificatetr.jpg" alt="Certificatetr">
        `,
      },
      {
        q: "6) –ó —è–∫–æ—é –∫–≤—ñ—Ç–∫–æ—é —Ç–µ–±–µ –∞—Å–æ—Ü—ñ—é–≤–∞–ª–∞ –ü–∞–Ω—ñ?",
        answer: { accept: ["–µ–¥–µ–ª—å–≤–µ–π—Å", "–µ–¥–µ–ª–≤–µ–π—Å", "edelweiss"] },
        prize: `
          <h4>üéÅ –ü—Ä–∏–∑ #6 ‚Äî PlayMe1.pdf</h4>
          <iframe class="embed pdf" src="assets/PlayMe1.pdf"></iframe>
        `,
      },
      {
        q: "7) –•—Ç–æ –Ω–∞—Ä–æ–¥–∂—É—î—Ç—å—Å—è —É —Å–µ—Ä–ø–Ω—ñ?",
        hint: "–ú–æ–∂–ª–∏–≤–æ: –õ–µ–≤ ü¶Å ‚Ä¶ –∞–±–æ —Ç–∏ üòâ",
        answer: { accept: ["–ª–µ–≤", "–¥—ñ–≤–∞", "—Ç–∏", "–≤—ñ–Ω", "—è"] },
        prize: `
          <div class="final">
            <h2>üíò –§—ñ–Ω–∞–ª—å–Ω–∏–π —Å—é—Ä–ø—Ä–∏–∑ ‚Äî Z-DRnez.mp4</h2>
            <video class="embed video" src="assets/Z-DRnez.mp4" controls playsinline></video>
          </div>
        `,
      },
    ];

    // === –õ–û–ì–Ü–ö–ê ===
    const elSteps = document.getElementById('steps');
    const bar = document.getElementById('bar');

    const key = 'bday-quest-progress-v1';
    let progress = parseInt(localStorage.getItem(key) || '0', 10);
    if (isNaN(progress) || progress < 0) progress = 0;
    if (progress > STEPS.length) progress = STEPS.length;

    function render() {
      elSteps.innerHTML = '';
      const pct = Math.round((progress / STEPS.length) * 100);
      bar.style.width = pct + '%';

      STEPS.forEach((step, idx) => {
        const wrapper = document.createElement('div');
        wrapper.className = 'step' + (idx === progress ? ' active' : (idx < progress ? '' : ' locked'));

        const card = document.createElement('div');
        card.className = 'grid';

        const left = document.createElement('div');
        left.innerHTML = `
          <div class="q">${step.q}</div>
          ${step.hint ? `<div class="hint">–ü—ñ–¥–∫–∞–∑–∫–∞: ${step.hint}</div>` : ''}
          <div class="field">
            <input type="text" placeholder="–í–≤–µ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å‚Ä¶" aria-label="–í—ñ–¥–ø–æ–≤—ñ–¥—å" />
            <button class="primary">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          </div>
          <div class="msg" aria-live="polite"></div>
        `;

        const right = document.createElement('div');
        right.innerHTML = `<div class="prize">${step.prize}</div>`;

        card.appendChild(left);
        card.appendChild(right);
        wrapper.appendChild(card);
        elSteps.appendChild(wrapper);

        const input = left.querySelector('input');
        const btn = left.querySelector('button');
        const msg = left.querySelector('.msg');

        if (idx < progress) {
          input.disabled = true; input.value = '‚úî –í—ñ–¥–ø–æ–≤—ñ–¥—å –∑–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ';
          btn.disabled = true; btn.textContent = '–ì–æ—Ç–æ–≤–æ';
          msg.innerHTML = '<span class="ok">–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–∂–µ—à —Ä—É—Ö–∞—Ç–∏—Å—è –¥–∞–ª—ñ.</span>';
        }

        if (idx === progress) {
          input.focus();
          const check = () => {
            const value = input.value;
            const good = step.answer.accept.some(acc => soft(value) === soft(acc));
            if (good) {
              msg.innerHTML = '<span class="ok">–Ñ –∫–æ–Ω—Ç–∞–∫—Ç! –ü—Ä–∏–∑ –≤—ñ–¥–∫—Ä–∏—Ç–æ üéâ</span>';
              progress = Math.min(STEPS.length, progress + 1);
              localStorage.setItem(key, String(progress));
              setTimeout(render, 500);
            } else {
              msg.innerHTML = '<span class="bad">–ü–æ–∫–∏ –Ω—ñ. –°–ø—Ä–æ–±—É–π —ñ–Ω–∞–∫—à–µ –∞–±–æ –≥–ª—è–Ω—å –ø—ñ–¥–∫–∞–∑–∫—É.</span>';
            }
          };
          btn.addEventListener('click', check);
          input.addEventListener('keydown', (e) => { if (e.key === 'Enter') check(); });
        }
      });

      if (progress === STEPS.length) {
        elSteps.innerHTML = '';
        const fin = document.createElement('div');
        fin.className = 'step active';
        fin.innerHTML = `
          <div class="prize">${STEPS[STEPS.length - 1].prize}</div>
          <div class="footer"><button id="again">–ü–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É</button></div>
        `;
        elSteps.appendChild(fin);
        document.getElementById('again')?.addEventListener('click', () => {
          localStorage.removeItem(key);
          progress = 0; render();
        });
      }
    }

    render();

    document.getElementById('reset').addEventListener('click', () => {
      if (confirm('–°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å —ñ –ø–æ—á–∞—Ç–∏ –∑–∞–Ω–æ–≤–æ?')) {
        localStorage.removeItem(key);
        progress = 0; render();
      }
    });

    document.getElementById('share').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(location.href);
        alert('–ü–æ—Å–∏–ª–∞–Ω–Ω—è —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ —É –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É!');
      } catch {
        alert('–°–∫–æ–ø—ñ—é–π –ø–æ—Å–∏–ª–∞–Ω–Ω—è –≤—Ä—É—á–Ω—É –∑ –∞–¥—Ä–µ—Å–Ω–æ–≥–æ —Ä—è–¥–∫–∞.');
      }
    });
  </script>
</body>
</html>
